<!doctype html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{% static 'css/add_team.css' %}">

    <style>
        table, thead, tbody, tr, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        table {
            width: 100%;
        }

        td {
            text-align: center;
        }

        td > input {
            border: none;
            background-color: inherit;
            width: calc(100% - 10px);
            height: 100%;
            text-align: center;
        }
    </style>

    <title>Document</title>
</head>
<body>

    <div class="navbar">
        <a class="menu-item" href="/">КнАГУ EVENT MANAGER</a>
    </div>
    <div class="content">

        <h1>Оценивание {{ event.name }}</h1>

        <table>
            <thead>
                <tr>
                    <th>Название команды</th>
                    <th>Прогресс</th>
                    <th>Максимальный балл</th>
                </tr>
            </thead>
            <tbody>
                {% for team in teams %}
                    <tr>
                        <td>{{ team.team.name }}</td>
                        <td id="{{ team.team.id }}"></td>
                        <td>{{ max_score }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

    <script>

        function set_progress(tid, perc) {
			let td = document.getElementById(`${tid}`)
            td.style = `
                background: linear-gradient(to right, lightgreen 0px, lightgreen ${perc}%, gray ${perc}%, gray 100%);
                width: 80%;
                height: 50px;
            `
        }

	    {% for team in teams %}
            set_progress({{ team.team.id }}, {{ team.perc }})
	    {% endfor %}

        setTimeout(() => {
			window.location.reload()
        }, 10000)
    </script>

</body>
</html>